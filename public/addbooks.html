<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>BookLust - Add Books</title>
    <!-- bootstrap css from cdn-->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />

    <link rel="stylesheet" href="./css/style.css" />
    <!-- font awesome cdn-->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <!-- navbar -->
    <nav class="navbar navbar-expand-lg navbar-custom">
      <div class="container">
        <a class="navbar-brand" href="./index.html"
          ><img src="./images/logo1.png" style="width: 120px; height: 30px"
        /></a>
        <button
          class="navbar-toggler custom-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse justify-content-end"
          id="navbarSupportedContent"
        >
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="./index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./catalog.html">Go To Catalog</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Top Wave -->
    <div class="gradient">
      <div class="container pt-3 text-center">
        <div class="row align-items-center justify-content-center">
          <div class="col-12 mb-4">
            <h2>Add Books</h2>
          </div>
        </div>
        <div class="row align-items-center justify-content-center">
          <div class="col-12">
            <form action="#" onsubmit="">
              <div class="form-row">
                <div class="col-md-5 mb-2">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Username"
                    id="username"
                    name="username"
                  />
                </div>
                <div class="col-md-5 mb-2">
                  <input
                    type="password"
                    class="form-control"
                    placeholder="password"
                    id="password"
                    name="password"
                  />
                </div>
                <div class="col-md-2">
                  <input
                    type="button"
                    class="btn btn-warning"
                    value="Log In"
                    id="login"
                    onclick="loginUser()"
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-12 errormsg">
                  <h5 id="errormsg" class="font-weight-bold">
                    You are not logged in currently. log in to continue!!!
                  </h5>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 200">
        <path
          fill="#fff"
          fill-opacity="1"
          d="M0,128L48,117.3C96,107,192,85,288,80C384,75,480,85,576,112C672,139,768,181,864,181.3C960,181,1056,139,1152,122.7C1248,107,1344,117,1392,122.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"
        ></path>
      </svg>
    </div>

    <!-- Details Section -->
    <div class="container">
      <div class="row my-3 align-items-center justify-content-center">
        <fieldset id="dataForm" class="container" disabled>
          <form id="addbooks" name="addbooks" disasbled>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="bookname">Book Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="bookname"
                  required
                />
              </div>
              <div class="form-group col-md-6">
                <label for="Author">Author</label>
                <input type="text" class="form-control" id="author" required />
              </div>
            </div>
            <div class="form-group">
              <label for="Description">Description</label>
              <textarea
                class="form-control"
                id="description"
                rows="5"
                required
              ></textarea>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="Price">Price (Rs.)</label>
                <input
                  type="text"
                  class="form-control"
                  id="price"
                  placeholder="Ex: 125.00"
                  required
                />
              </div>
              <div class="form-group col-md-6">
                <label for="isbn">ISBN</label>
                <input
                  type="text"
                  class="form-control"
                  id="isbn"
                  placeholder="Ex: 978-3-16-148410-0"
                  required
                />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group col-md-8">
                <label for="Genre">Genre</label>
                <select id="genre" class="form-control">
                  <option selected>Action and adventure</option>
                  <option>Biography</option>
                  <option>Comic book</option>
                  <option>Encyclopedia</option>
                  <option>Horror/Mystery</option>
                  <option>Poetry</option>
                  <option>Science</option>
                  <option>Sports and leisure</option>
                </select>
              </div>
              <div class="form-group col-md-4">
                <label for="Type">Type</label>
                <select id="type" class="form-control">
                  <option selected>New Arrival</option>
                  <option>Trending</option>
                  <option>Old</option>
                </select>
              </div>
            </div>
            <div class="row align-items-center justify-content-center">
              <input
                type="button"
                value="Add Details"
                class="btn btn-warning"
                onclick="writeData()"
              />
            </div>
          </form>
        </fieldset>
      </div>
    </div>

    <!-- Footer Section -->
    <footer class="">
      <div class="container-fluid text-center">
        <div class="row">
          <div class="col-12">
            <!-- Social buttons -->
            <div class="text-center center-block">
              <p class="txt-railway">Connect With Us</p>
              <a href="#"
                ><i
                  id="social-fb"
                  class="fa fa-facebook-square fa-3x social"
                ></i
              ></a>
              <a href="#"
                ><i id="social-tw" class="fa fa-twitter-square fa-3x social"></i
              ></a>
              <a href="#"
                ><i
                  id="social-gp"
                  class="fa fa-google-plus-square fa-3x social"
                ></i
              ></a>
              <a href="#contact"
                ><i
                  id="social-em"
                  class="fa fa-envelope-square fa-3x social"
                ></i
              ></a>
            </div>
          </div>
        </div>
        <br />
        <div class="row">
          <div class="col-12">
            <p class="text-muted">
              Modern Web Application Development - SLIIT - Final Assignment -
              MWAD20010002 - SH KANDAUDAHEWA
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- Modal Success -->
    <div
      class="modal fade"
      id="successModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="successModalTitle"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Success!!!</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>
              Record Successfully Inserted. Check the Catalog to View Full
              Details
            </p>
          </div>
        </div>
      </div>
    </div>

    <!--JQuery and bootstrap Scripts + Custom Script-->
    <script src="/js/jquery.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
      crossorigin="anonymous"
    ></script>

    <!-- Firebase Setup -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.1.1/firebase-app.min.js"
      integrity="sha512-IUK2Oz9upp47fk1QFxuMNvqbpB+PBpO1I9V5+hNL0KqitBdIaEXhy2zSPGVGltzKKqK5f0L0P3zqafKa7kf8Qw=="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.1.1/firebase-database.min.js"
      integrity="sha512-V/yK7bhXghJO7aNG8iroxcrMdU1JIKhQnk8KKWxiD3+qa44Mwzid50MaJdYcVoGqJNYek38ePv23qIKKiN817g=="
      crossorigin="anonymous"
    ></script>
    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.1.1/firebase-analytics.min.js"
      integrity="sha512-I3Xtm9qS1nuJkElx7PUhXRWuV1+aPMRHtx3m3tsN93C4KQJcceSkCJjpiWytA0hTOkvjXayoYGl2tNCQX1nL1w=="
      crossorigin="anonymous"
    ></script>
    <!-- Add Firebase products that you want to use -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.1.1/firebase-auth.min.js"
      integrity="sha512-34UI3qp0j83ALQB1cQtCb34OBQKqkWgl6AmM1y0olRJzxB1tJBs/4YI9NPAQP25HJpFt8GgjZ8blQltumXNfMw=="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/firebase/8.1.1/firebase-firestore.min.js"
      integrity="sha512-D0jUM6G/75Fw7ihlen91+V6lmoR416c1Wm0Q+I2r4ylrZKsjyhjz/kizO08trRWKscRhUexEpLKdxP+1t2TvjQ=="
      crossorigin="anonymous"
    ></script>

    <script>
      firebase.initializeApp({
        apiKey: "AIzaSyBxIIu7gfBqen_rrU_Njz-Rln2Qd4ikm4I",
        authDomain: "booklust-6dcb9.firebaseapp.com",
        projectId: "booklust-6dcb9",
      });

      function writeData() {
        // Check whether all text boxes are filled properly -- else return false

        if (
          document.getElementById("bookname").value == "" ||
          document.getElementById("author").value == "" ||
          document.getElementById("description").value == "" ||
          document.getElementById("price").value == "" ||
          document.getElementById("isbn").value == "" ||
          document.getElementById("genre").value == "" ||
          document.getElementById("type").value == ""
        ) {
          alert("Please Fill All The Details To Proceed Further!!!");
          return false;
        } else {
          var db = firebase.firestore();

          db.collection("books")
            .add({
              bName: document.getElementById("bookname").value.trim(),
              bAuthor: document.getElementById("author").value.trim(),
              bDescription: document.getElementById("description").value.trim(),
              bPrice: document.getElementById("price").value.trim(),
              bISBN: document.getElementById("isbn").value.trim(),
              bGenre: document.getElementById("genre").value.trim(),
              bType: document.getElementById("type").value.trim(),
            })
            .then(function (docRef) {
              // alert("Document written with ID: " + docRef.id); Displaying a modal
              $(document).ready(function () {
                $("#successModal").modal("show");
              });

              this.document.getElementById("addbooks").reset();
            })
            .catch(function (error) {
              alert(error);
              console.error("Error adding document: ", error);
            });
        }
      }
    </script>

    <!-- Loading Custom.js file -->
    <script src="./js/custom.js"></script>

    <!-- Scroll Top Button Code -->
    <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
    <script type="text/javascript" src="./js/scrollTop.js"></script>
    <!-- End of Scroll Top -->
  </body>
</html>
